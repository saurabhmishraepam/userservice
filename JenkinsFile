node {
        stage('Compile Stage') {
                	sh "mvn clean"
        }
        stage('Test Stage') {
                	sh "mvn test"
        }
        stage('Build Artifact Stage') {
                sh "mvn install -DskipTests"
        }
        stage('Copy Artifact to Deployment Location') {
              sh 'cp -r target/* docker'
            }
        stage('build and push docker image') {
            docker.withRegistry('https://index.docker.io/v1/', '41ef2345-2b6b-458e-a5e5-80701a9953c2') {
                def customImage = docker.build("saurabhdockerepam/aa-space:firstbuild-${env.BUILD_ID}", "docker/")
                /* Push the container to the custom Registry */
                customImage.push()
            }
        }
}